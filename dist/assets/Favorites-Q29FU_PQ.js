import{c as T,Y as re,Z as ie,_ as le,r as m,j as e,B as g,a as v,Q as Z,m as I,X as R,L as $}from"./index-BxPqZtyK.js";import{u as G}from"./useToast-B6lGbM68.js";import{S as oe}from"./search-DoXDqBnS.js";import{F as ne}from"./funnel-Ch6WYiIJ.js";import{G as ce,L as de}from"./list-BDYTGQfO.js";import{T as z}from"./trash-2-fswwwBiO.js";import{M as O}from"./map-pin-BX2ICHsk.js";import{S as q}from"./star-CnDuIVrE.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],xe=T("folder-plus",me);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],he=T("folder",ue);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ge=T("plus",pe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],fe=T("sticky-note",ve);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],be=T("tag",ye),D=[{id:"fav1",userId:"user1",itemType:"service_post",itemId:"service1",itemData:{title:"Tour Astronómico Desierto de la Tatacoa",description:"Experiencia nocturna única de observación de estrellas en el desierto más hermoso de Colombia",image:"https://images.unsplash.com/photo-1509316975850-ff9c5deb0cd9?w=400&h=300&fit=crop",price:{amount:15e4,currency:"COP",unit:"por persona"},rating:4.9,location:{name:"Desierto de la Tatacoa",city:"Villavieja",department:"Huila"},provider:{name:"Carlos Mendoza",businessName:"Tatacoa Adventures"},serviceType:"Tour Astronómico",availability:{available:!0}},addedAt:"2024-01-15T10:30:00Z",notes:"Perfecto para nuestra luna de miel",tags:["astronomía","romántico","nocturno"]},{id:"fav2",userId:"user1",itemType:"accommodation",itemId:"lodge1",itemData:{title:"Desert Lodge Villavieja",description:"Hospedaje cómodo con vista panorámica al desierto y servicios de primera",image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400&h=300&fit=crop",price:{amount:2e5,currency:"COP",unit:"por noche"},rating:4.7,location:{name:"Villavieja Centro",city:"Villavieja",department:"Huila"},provider:{name:"Ana García",businessName:"Desert Stays"},serviceType:"Alojamiento",availability:{available:!1,nextAvailableDate:"2024-02-15"}},addedAt:"2024-01-10T14:20:00Z",tags:["alojamiento","vista","confortable"]}],E=[{id:"default",name:"Mis Favoritos",description:"Colección principal de servicios favoritos",userId:"user1",items:D,isPublic:!1,isDefault:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-15T10:30:00Z",color:"#3B82F6",icon:"heart"},{id:"wishlist",name:"Lista de Deseos",description:"Servicios que quiero probar en el futuro",userId:"user1",items:[],isPublic:!1,isDefault:!1,createdAt:"2024-01-05T10:00:00Z",updatedAt:"2024-01-05T10:00:00Z",color:"#F59E0B",icon:"star"}],je=re()(ie(le((a,n)=>({collections:E,currentCollection:E[0],favoriteItems:D,loading:!1,error:null,totalCount:D.length,addToFavorites:async s=>{var i;const t=n();a({loading:!0,error:null});try{if(t.favoriteItems.find(c=>c.itemId===s.itemId))throw new Error("Este elemento ya está en tus favoritos");await new Promise(c=>setTimeout(c,500));const o={id:`fav_${Date.now()}`,userId:"user1",itemType:s.itemType,itemId:s.itemId,itemData:{title:"Nuevo Servicio",description:"Descripción del servicio",image:"/placeholder-image.jpg",price:{amount:0,currency:"COP",unit:"por persona"},rating:0,location:{name:"Villavieja",city:"Villavieja",department:"Huila"},provider:{name:"Proveedor",businessName:"Empresa"},serviceType:"Servicio",availability:{available:!0}},addedAt:new Date().toISOString(),notes:s.notes,tags:s.tags||[]},d=s.collectionId||((i=t.getDefaultCollection())==null?void 0:i.id)||"default";a(c=>({favoriteItems:[...c.favoriteItems,o],collections:c.collections.map(p=>p.id===d?{...p,items:[...p.items,o]}:p),totalCount:c.totalCount+1,loading:!1}))}catch(r){throw a({loading:!1,error:r instanceof Error?r.message:"Error al agregar a favoritos"}),r}},removeFromFavorites:async s=>{a({loading:!0,error:null});try{await new Promise(t=>setTimeout(t,300)),a(t=>({favoriteItems:t.favoriteItems.filter(i=>i.itemId!==s),collections:t.collections.map(i=>({...i,items:i.items.filter(r=>r.itemId!==s)})),totalCount:Math.max(0,t.totalCount-1),loading:!1}))}catch(t){throw a({loading:!1,error:t instanceof Error?t.message:"Error al quitar de favoritos"}),t}},updateFavorite:async(s,t)=>{a({loading:!0,error:null});try{await new Promise(i=>setTimeout(i,300)),a(i=>({favoriteItems:i.favoriteItems.map(r=>r.id===s?{...r,...t}:r),collections:i.collections.map(r=>({...r,items:r.items.map(o=>o.id===s?{...o,...t}:o)})),loading:!1}))}catch(i){throw a({loading:!1,error:i instanceof Error?i.message:"Error al actualizar favorito"}),i}},isFavorite:s=>n().favoriteItems.some(i=>i.itemId===s),getFavoriteByItemId:s=>n().favoriteItems.find(i=>i.itemId===s)||null,createCollection:async s=>{a({loading:!0,error:null});try{await new Promise(i=>setTimeout(i,500));const t={id:`col_${Date.now()}`,name:s.name,description:s.description,userId:"user1",items:[],isPublic:s.isPublic||!1,isDefault:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),color:s.color||"#3B82F6",icon:s.icon||"folder"};a(i=>({collections:[...i.collections,t],loading:!1}))}catch(t){throw a({loading:!1,error:t instanceof Error?t.message:"Error al crear colección"}),t}},updateCollection:async(s,t)=>{a({loading:!0,error:null});try{await new Promise(i=>setTimeout(i,300)),a(i=>{var r;return{collections:i.collections.map(o=>o.id===s?{...o,...t,updatedAt:new Date().toISOString()}:o),currentCollection:((r=i.currentCollection)==null?void 0:r.id)===s?{...i.currentCollection,...t}:i.currentCollection,loading:!1}})}catch(i){throw a({loading:!1,error:i instanceof Error?i.message:"Error al actualizar colección"}),i}},deleteCollection:async s=>{const i=n().collections.find(r=>r.id===s);if(i!=null&&i.isDefault)throw new Error("No puedes eliminar la colección principal");a({loading:!0,error:null});try{await new Promise(r=>setTimeout(r,500)),a(r=>{var o;return{collections:r.collections.filter(d=>d.id!==s),currentCollection:((o=r.currentCollection)==null?void 0:o.id)===s?null:r.currentCollection,loading:!1}})}catch(r){throw a({loading:!1,error:r instanceof Error?r.message:"Error al eliminar colección"}),r}},setCurrentCollection:s=>{a({currentCollection:s})},getDefaultCollection:()=>{const s=n();return s.collections.find(t=>t.isDefault)||s.collections[0]||null},loadFavorites:async()=>{a({loading:!0,error:null});try{await new Promise(s=>setTimeout(s,800)),a({favoriteItems:D,totalCount:D.length,loading:!1})}catch(s){a({loading:!1,error:s instanceof Error?s.message:"Error al cargar favoritos"})}},loadCollections:async()=>{a({loading:!0,error:null});try{await new Promise(s=>setTimeout(s,500)),a({collections:E,currentCollection:E[0],loading:!1})}catch(s){a({loading:!1,error:s instanceof Error?s.message:"Error al cargar colecciones"})}},searchFavorites:async(s,t)=>{let r=n().favoriteItems;return s&&(r=r.filter(o=>{var d;return o.itemData.title.toLowerCase().includes(s.toLowerCase())||o.itemData.description.toLowerCase().includes(s.toLowerCase())||((d=o.tags)==null?void 0:d.some(c=>c.toLowerCase().includes(s.toLowerCase())))})),t&&(t.itemType&&t.itemType.length>0&&(r=r.filter(o=>t.itemType.includes(o.itemType))),t.tags&&t.tags.length>0&&(r=r.filter(o=>{var d;return(d=o.tags)==null?void 0:d.some(c=>t.tags.includes(c))})),t.availability&&(t.availability==="available"?r=r.filter(o=>o.itemData.availability.available):t.availability==="unavailable"&&(r=r.filter(o=>!o.itemData.availability.available))),t.priceRange&&(r=r.filter(o=>o.itemData.price.amount>=(t.priceRange.min||0)&&o.itemData.price.amount<=(t.priceRange.max||1/0)))),r},clearError:()=>a({error:null}),reset:()=>{a({collections:[],currentCollection:null,favoriteItems:[],loading:!1,error:null,totalCount:0})}}),{name:"favorites-storage",partialize:a=>({collections:a.collections,favoriteItems:a.favoriteItems,totalCount:a.totalCount})}),{name:"favorites-store"}));function Ae(){var H;const{collections:a,currentCollection:n,favoriteItems:s,loading:t,error:i,totalCount:r,loadFavorites:o,loadCollections:d,setCurrentCollection:c,createCollection:p,removeFromFavorites:b,searchFavorites:h,clearError:A}=je(),{showToast:C}=G(),[N,x]=m.useState("grid"),[j,L]=m.useState(""),[P,Q]=m.useState(!1),[_,X]=m.useState(s),[Y,B]=m.useState(!1),[w,k]=m.useState(new Set),[J,S]=m.useState(!1),[f,M]=m.useState({itemType:[],tags:[],availability:"all"});m.useEffect(()=>{s.length===0&&(o(),d())},[]),m.useEffect(()=>{K()},[j,f,s,n]),m.useEffect(()=>{i&&(C(i,"error"),A())},[i]);const K=async()=>{try{let u=(n==null?void 0:n.items)||s;(j||Object.keys(f).some(y=>{const F=f[y];return Array.isArray(F)?F.length>0:F!=="all"&&F!==void 0}))&&(u=await h(j,f)),X(u)}catch(l){console.error("Error applying filters:",l)}},V=l=>{c(l),k(new Set),S(!1)},U=async l=>{try{await b(l),C("Eliminado de favoritos","success"),k(u=>{const y=new Set(u);return y.delete(l),y})}catch{}},W=async()=>{if(!(w.size===0||!window.confirm(`¿Eliminar ${w.size} elementos de favoritos?`)))try{for(const u of w)await b(u);C(`${w.size} elementos eliminados`,"success"),k(new Set),S(!1)}catch{}},ee=l=>{k(u=>{const y=new Set(u);return y.has(l)?y.delete(l):y.add(l),S(y.size>0),y})},ae=l=>new Intl.NumberFormat("es-CO",{style:"currency",currency:l.currency,minimumFractionDigits:0}).format(l.amount),se=l=>({service_post:"Servicio",accommodation:"Alojamiento",activity:"Actividad",package:"Paquete"})[l],te=l=>({service_post:"bg-blue-100 text-blue-800",accommodation:"bg-green-100 text-green-800",activity:"bg-orange-100 text-orange-800",package:"bg-purple-100 text-purple-800"})[l];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-accent-50 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"Mis Favoritos"}),e.jsxs("p",{className:"text-gray-600 text-lg",children:[r," ",r===1?"servicio guardado":"servicios guardados"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(g,{variant:"outline",onClick:()=>B(!0),children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Nueva colección"]}),e.jsxs(g,{variant:"primary",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Explorar servicios"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-strong border border-white/20 p-6 sticky top-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Colecciones"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>V(null),className:v("w-full flex items-center space-x-3 p-3 rounded-xl text-left transition-colors",n?"hover:bg-gray-100 text-gray-700":"bg-primary-600 text-white"),children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Todos"}),e.jsxs("div",{className:"text-xs opacity-75",children:[r," elementos"]})]})]}),a.map(l=>e.jsxs("button",{onClick:()=>V(l),className:v("w-full flex items-center space-x-3 p-3 rounded-xl text-left transition-colors",(n==null?void 0:n.id)===l.id?"bg-primary-600 text-white":"hover:bg-gray-100 text-gray-700"),children:[e.jsx(he,{className:"w-5 h-5",style:{color:(n==null?void 0:n.id)===l.id?"white":l.color}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.name}),e.jsxs("div",{className:"text-xs opacity-75",children:[l.items.length," elementos"]})]})]},l.id))]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-strong border border-white/20 p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:j,onChange:l=>L(l.target.value),placeholder:"Buscar en favoritos...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>Q(!P),className:v("px-4 py-3 rounded-xl border-2 font-medium transition-all flex items-center space-x-2",P?"bg-primary-600 text-white border-primary-600":"bg-white border-gray-300 text-gray-700 hover:border-primary-300"),children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Filtros"})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>x("grid"),className:v("p-2 rounded-md transition-colors",N==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"),children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x("list"),className:v("p-2 rounded-md transition-colors",N==="list"?"bg-white shadow-sm":"hover:bg-gray-200"),children:e.jsx(de,{className:"w-4 h-4"})})]})]})]}),P&&e.jsx(I.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de servicio"}),e.jsxs("select",{value:((H=f.itemType)==null?void 0:H[0])||"",onChange:l=>M({...f,itemType:l.target.value?[l.target.value]:[]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los tipos"}),e.jsx("option",{value:"service_post",children:"Servicios"}),e.jsx("option",{value:"accommodation",children:"Alojamiento"}),e.jsx("option",{value:"activity",children:"Actividades"}),e.jsx("option",{value:"package",children:"Paquetes"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Disponibilidad"}),e.jsxs("select",{value:f.availability,onChange:l=>M({...f,availability:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"Todas"}),e.jsx("option",{value:"available",children:"Disponibles"}),e.jsx("option",{value:"unavailable",children:"No disponibles"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(g,{variant:"ghost",onClick:()=>{M({itemType:[],tags:[],availability:"all"}),L("")},className:"w-full",children:"Limpiar filtros"})})]})})]}),J&&e.jsxs(I.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-primary-600 text-white rounded-2xl p-4 mb-6 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("span",{className:"font-medium",children:[w.size," elementos seleccionados"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(g,{variant:"ghost",size:"sm",onClick:W,className:"text-white hover:bg-white/20",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Eliminar"]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>{k(new Set),S(!1)},className:"text-white hover:bg-white/20",children:e.jsx(R,{className:"w-4 h-4"})})]})]}),t&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}),!t&&e.jsx("div",{className:v("grid gap-6",N==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3":"grid-cols-1"),children:_.map((l,u)=>e.jsx(Ne,{item:l,viewMode:N,index:u,isSelected:w.has(l.itemId),onSelect:()=>ee(l.itemId),onRemove:()=>U(l.itemId),formatPrice:ae,getItemTypeLabel:se,getItemTypeColor:te},l.id))}),!t&&_.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:j||Object.values(f).some(l=>Array.isArray(l)?l.length>0:l!=="all")?"No se encontraron favoritos":"Aún no tienes favoritos"}),e.jsx("p",{className:"text-gray-600 mb-4",children:j||Object.values(f).some(l=>Array.isArray(l)?l.length>0:l!=="all")?"Intenta ajustar los filtros de búsqueda":"Explora nuestros servicios y guarda los que más te gusten"}),e.jsx(g,{variant:"primary",children:"Explorar servicios"})]})]})]})]}),Y&&e.jsx(we,{onClose:()=>B(!1),onCreate:p})]})}function Ne({item:a,viewMode:n,index:s,isSelected:t,onSelect:i,onRemove:r,formatPrice:o,getItemTypeLabel:d,getItemTypeColor:c}){var b;const p=h=>new Intl.DateTimeFormat("es-CO",{year:"numeric",month:"short",day:"numeric"}).format(new Date(h));return n==="list"?e.jsx(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:v("bg-white/80 backdrop-blur-lg rounded-3xl shadow-strong border transition-all duration-300",t?"border-primary-500 bg-primary-50/50":"border-white/20 hover:shadow-xl"),children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("input",{type:"checkbox",checked:t,onChange:i,className:"mt-2 w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:a.itemData.image,alt:a.itemData.title,className:"w-24 h-24 rounded-2xl object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1 line-clamp-2",children:a.itemData.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:a.itemData.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),a.itemData.location.name]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-1 text-yellow-500"}),a.itemData.rating]}),e.jsx("span",{className:v("px-2 py-1 rounded-full text-xs font-medium",c(a.itemType)),children:d(a.itemType)})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("div",{className:"text-xl font-bold text-primary-600 mb-1",children:o(a.itemData.price)}),e.jsx("div",{className:"text-sm text-gray-600",children:a.itemData.price.unit})]})]}),(((b=a.tags)==null?void 0:b.length)||a.notes)&&e.jsxs("div",{className:"mb-3 space-y-2",children:[a.tags&&a.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map(h=>e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-lg text-xs flex items-center",children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),h]},h))}),a.notes&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-2",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(fe,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-yellow-800",children:a.notes})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Agregado el ",p(a.addedAt)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",asChild:!0,children:e.jsx($,{to:`/servicios/${a.itemId}`,children:"Ver servicio"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:r,className:"text-red-600 hover:bg-red-50",children:e.jsx(z,{className:"w-4 h-4"})})]})]})]})]})})}):e.jsxs(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:v("bg-white/80 backdrop-blur-lg rounded-3xl shadow-strong border transition-all duration-300 overflow-hidden group",t?"border-primary-500 bg-primary-50/50":"border-white/20 hover:shadow-xl"),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.itemData.image,alt:a.itemData.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("input",{type:"checkbox",checked:t,onChange:i,className:"w-4 h-4 text-primary-600 bg-white/90 border-gray-300 rounded focus:ring-primary-500"})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:v("px-2 py-1 rounded-full text-xs font-medium",c(a.itemType)),children:d(a.itemType)})}),!a.itemData.availability.available&&e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs",children:"No disponible"})}),e.jsx("div",{className:"absolute bottom-3 right-3 text-white",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex items-center bg-black/50 rounded-lg px-2 py-1",children:[e.jsx(q,{className:"w-3 h-3 mr-1 text-yellow-400"}),e.jsx("span",{className:"text-xs font-medium",children:a.itemData.rating})]})})})]}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1 line-clamp-2",children:a.itemData.title}),e.jsxs("div",{className:"flex items-center text-gray-600 text-sm mb-2",children:[e.jsx(O,{className:"w-3 h-3 mr-1"}),a.itemData.location.name]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:a.itemData.description}),a.tags&&a.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[a.tags.slice(0,3).map(h=>e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-lg text-xs",children:["#",h]},h)),a.tags.length>3&&e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-lg text-xs",children:["+",a.tags.length-3]})]}),e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-primary-600",children:o(a.itemData.price)}),e.jsx("div",{className:"text-xs text-gray-500",children:a.itemData.price.unit})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-gray-500",children:p(a.addedAt)}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",asChild:!0,children:e.jsx($,{to:`/servicios/${a.itemId}`,children:"Ver"})}),e.jsx("button",{onClick:r,className:"p-1 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(z,{className:"w-4 h-4"})})]})]})]})]})}function we({onClose:a,onCreate:n}){const[s,t]=m.useState(""),[i,r]=m.useState(""),[o,d]=m.useState("#3B82F6"),[c,p]=m.useState(!1),[b,h]=m.useState(!1),{showToast:A}=G(),C=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316"],N=async x=>{if(x.preventDefault(),!!s.trim()){h(!0);try{await n({name:s.trim(),description:i.trim()||void 0,color:o,isPublic:c}),A("Colección creada exitosamente","success"),a()}catch{}finally{h(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx(I.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Nueva Colección"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(R,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre *"}),e.jsx("input",{type:"text",value:s,onChange:x=>t(x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Mi nueva colección",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),e.jsx("textarea",{value:i,onChange:x=>r(x.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Describe tu colección..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsx("div",{className:"flex space-x-2",children:C.map(x=>e.jsx("button",{type:"button",onClick:()=>d(x),className:v("w-8 h-8 rounded-full border-2 transition-all",o===x?"border-gray-400 scale-110":"border-transparent"),style:{backgroundColor:x}},x))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isPublic",checked:c,onChange:x=>p(x.target.checked),className:"w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"isPublic",className:"ml-2 text-sm text-gray-700",children:"Hacer pública esta colección"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:a,className:"flex-1",children:"Cancelar"}),e.jsx(g,{type:"submit",variant:"primary",disabled:!s.trim()||b,className:"flex-1",children:b?"Creando...":"Crear"})]})]})]})})})}export{Ae as default};

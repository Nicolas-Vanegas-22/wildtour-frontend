import{k as j,r as c,j as e,L as t}from"./index-BxPqZtyK.js";import{u as o}from"./useQuery-CGC4B3bg.js";import{B as d}from"./BookingRepo-DNL2fKhO.js";class p{static async sendEmail(a){return console.warn("EmailService.sendEmail not implemented - email not sent:",a),new Promise(r=>{setTimeout(()=>{console.log("Mock email sent to:",a.to),r(!0)},500)})}static async sendBookingConfirmation(a,r){return console.warn("EmailService.sendBookingConfirmation not implemented"),this.sendEmail({to:a,subject:"Confirmación de Reserva - Wild Tour",body:`Tu reserva ha sido confirmada. ID: ${r.id}`,html:`<h1>¡Reserva Confirmada!</h1><p>ID: ${r.id}</p>`})}static async sendPasswordReset(a,r){return console.warn("EmailService.sendPasswordReset not implemented"),this.sendEmail({to:a,subject:"Restablecer Contraseña - Wild Tour",body:`Usa este token para restablecer tu contraseña: ${r}`,html:`<h1>Restablecer Contraseña</h1><p>Token: ${r}</p>`})}}function v(){const{bookingId:l}=j(),[a,r]=c.useState(!1),{data:s}=o({queryKey:["booking",l],queryFn:()=>d.getById(l)}),{data:n}=o({queryKey:["payment",l],queryFn:()=>d.getPayment(l)});c.useEffect(()=>{s&&!a&&x()},[s,a]);const x=async()=>{try{await p.sendBookingConfirmation(s),r(!0)}catch(i){console.error("Error sending confirmation email:",i)}},m=()=>{const i={booking:s,payment:n,qrCode:`https://wildtour.com/ticket/${l}`};console.log("Downloading ticket:",i),alert("El ticket se descargará en breve (funcionalidad pendiente de implementar)")},h=()=>{navigator.share?navigator.share({title:"Mi reserva en WildTour",text:`He reservado ${s==null?void 0:s.service.name} en WildTour`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Enlace copiado al portapapeles"))};return s?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"¡Reserva Confirmada!"}),e.jsx("p",{className:"text-gray-600",children:"Tu reserva ha sido procesada exitosamente"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Número de reserva: ",e.jsxs("span",{className:"font-mono font-semibold",children:["#",s.id]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Detalles de tu reserva"}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("img",{src:s.service.image,alt:s.service.name,className:"w-24 h-24 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.service.name}),e.jsx("p",{className:"text-gray-600",children:s.service.location}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:"text-yellow-500",children:"★"}),e.jsxs("span",{className:"ml-1 text-sm",children:[s.service.rating," (",s.service.reviewCount," opiniones)"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Información de la reserva"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha de inicio:"}),e.jsx("span",{children:new Date(s.checkIn).toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s.checkOut&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha de fin:"}),e.jsx("span",{children:new Date(s.checkOut).toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Huéspedes:"}),e.jsxs("span",{children:[s.guests.adults," adulto(s)",s.guests.children>0&&`, ${s.guests.children} niño(s)`]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Estado:"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"Confirmada"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Información de contacto"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Nombre:"}),e.jsx("p",{children:s.customerInfo.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("p",{children:s.customerInfo.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Teléfono:"}),e.jsx("p",{children:s.customerInfo.phone})]})]})]})]}),s.customerInfo.specialRequests&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-1",children:"Solicitudes especiales"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:s.customerInfo.specialRequests})]})]}),n&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Información de pago"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Método de pago:"}),e.jsx("span",{className:"capitalize",children:n.method.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha de pago:"}),e.jsx("span",{children:new Date(n.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Referencia:"}),e.jsx("span",{className:"font-mono",children:n.reference})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{children:["$",s.totalPrice.toLocaleString()]})]}),n.processingFee>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tarifa procesamiento:"}),e.jsxs("span",{children:["$",n.processingFee.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[e.jsx("span",{children:"Total pagado:"}),e.jsxs("span",{className:"text-green-600",children:["$",n.amount.toLocaleString()]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"¿Qué sigue ahora?"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-semibold",children:"1"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Confirmación por email"}),e.jsx("p",{className:"text-sm text-gray-600",children:a?"Te hemos enviado un email de confirmación con todos los detalles.":"Recibirás un email de confirmación en unos minutos."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-semibold",children:"2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Preparación para el viaje"}),e.jsx("p",{className:"text-sm text-gray-600",children:"El proveedor se pondrá en contacto contigo 24-48 horas antes del inicio para coordinar detalles."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-semibold",children:"3"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"¡Disfruta tu experiencia!"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lleva tu voucher (digital o impreso) y un documento de identidad válido."})]})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Acciones rápidas"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center space-x-2 bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"Descargar voucher"})]}),e.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),e.jsx("span",{children:"Compartir"})]}),e.jsxs(t,{to:"/reservas",className:"w-full flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("span",{children:"Ver mis reservas"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"¿Necesitas ayuda?"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Atención al cliente"}),e.jsx("p",{className:"text-sm text-gray-600",children:"+57 1 234 5678"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.708a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-600",children:"soporte@wildtour.com"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Chat en vivo"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Disponible 24/7"})]})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-3",children:"Política de cancelación"}),e.jsxs("div",{className:"text-sm text-yellow-700 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Cancelación gratuita:"})," Hasta 48 horas antes"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cancelación con cargo:"})," 50% del total entre 24-48 horas antes"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"No reembolsable:"})," Menos de 24 horas antes"]})]}),e.jsx("button",{className:"mt-3 text-yellow-800 underline text-sm hover:text-yellow-900",children:"Ver política completa"})]})]})]}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"¡Sigue explorando!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Descubre más experiencias increíbles en Colombia"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(t,{to:"/villavieja",className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Explorar Villavieja"}),e.jsx(t,{to:"/",className:"inline-flex items-center px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Volver al inicio"})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})}export{v as default};

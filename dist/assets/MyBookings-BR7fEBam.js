import{u as Z,r as i,j as e,a as x,B as c,m as b,W as y,h as E,V as J,d as w}from"./index-BxPqZtyK.js";import{u as U}from"./useToast-B6lGbM68.js";import{S as W}from"./search-DoXDqBnS.js";import{F as G}from"./funnel-Ch6WYiIJ.js";import{C as Q}from"./chevron-down-K8tQGdl3.js";import{D as C}from"./download-D9AsqJ4u.js";import{R as B}from"./refresh-cw-CDwP-Kjv.js";import{U as R}from"./users-BfO429se.js";import{M as X}from"./map-pin-BX2ICHsk.js";import{C as $}from"./credit-card-CZzSgmkE.js";import{E as K}from"./eye-Du1rtJmm.js";import{T as Y}from"./trash-2-fswwwBiO.js";import{S as k}from"./star-CnDuIVrE.js";const z=[{id:"1",bookingNumber:"WTC001234",userId:"user1",destinationId:"villavieja",providerId:"provider1",items:[{id:"item1",type:"activity",itemId:"tatacoa-tour",name:"Tour Astronómico Desierto de la Tatacoa",description:"Experiencia nocturna de observación de estrellas",price:15e4,quantity:1,startDate:"2024-01-15",endDate:"2024-01-15",guests:2,specialRequests:"Vegetarian meals preferred"}],contact:{firstName:"Juan",lastName:"Pérez",email:"juan@email.com",phone:"+57 300 123 4567"},guests:[{firstName:"Juan",lastName:"Pérez",document:"12345678",email:"juan@email.com",phone:"+57 300 123 4567",age:30},{firstName:"María",lastName:"González",document:"87654321",email:"maria@email.com",phone:"+57 300 765 4321",age:28}],startDate:"2024-01-15",endDate:"2024-01-15",bookingDate:"2024-01-01",status:"confirmed",statusHistory:[{status:"pending",date:"2024-01-01",updatedBy:"system"},{status:"confirmed",date:"2024-01-02",reason:"Payment received",updatedBy:"provider1"}],pricing:{subtotal:3e5,taxes:57e3,fees:1e4,discounts:0,total:367e3,currency:"COP"},payment:{method:"card",status:"completed",amount:367e3,currency:"COP",transactionId:"TXN123456",paymentDate:"2024-01-01T10:30:00Z"},specialRequests:"Vegetarian meals preferred",cancellationPolicy:"Cancelación gratuita hasta 48 horas antes",refundPolicy:"Reembolso completo disponible",confirmationSent:!0,remindersSent:1,createdAt:"2024-01-01T10:00:00Z",updatedAt:"2024-01-02T09:15:00Z",reviewed:!1},{id:"2",bookingNumber:"WTC001235",userId:"user1",destinationId:"villavieja",items:[{id:"item2",type:"accommodation",itemId:"desert-lodge",name:"Hospedaje Desert Lodge",description:"Noche en lodge con vista al desierto",price:2e5,quantity:1,startDate:"2024-02-10",endDate:"2024-02-12",guests:2}],contact:{firstName:"Juan",lastName:"Pérez",email:"juan@email.com",phone:"+57 300 123 4567"},guests:[{firstName:"Juan",lastName:"Pérez",document:"12345678",email:"juan@email.com",phone:"+57 300 123 4567",age:30}],startDate:"2024-02-10",endDate:"2024-02-12",bookingDate:"2024-01-20",status:"pending",statusHistory:[{status:"pending",date:"2024-01-20",updatedBy:"system"}],pricing:{subtotal:4e5,taxes:76e3,fees:15e3,discounts:2e4,total:471e3,currency:"COP"},payment:{method:"pse",status:"pending",amount:471e3,currency:"COP"},cancellationPolicy:"Cancelación gratuita hasta 24 horas antes",refundPolicy:"Reembolso parcial disponible",confirmationSent:!1,remindersSent:0,createdAt:"2024-01-20T14:30:00Z",updatedAt:"2024-01-20T14:30:00Z",reviewed:!1}],N={pending:{label:"Pendiente",color:"bg-yellow-100 text-yellow-800",icon:J,textColor:"text-yellow-600"},confirmed:{label:"Confirmada",color:"bg-green-100 text-green-800",icon:E,textColor:"text-green-600"},in_progress:{label:"En progreso",color:"bg-blue-100 text-blue-800",icon:B,textColor:"text-blue-600"},completed:{label:"Completada",color:"bg-emerald-100 text-emerald-800",icon:E,textColor:"text-emerald-600"},cancelled_user:{label:"Cancelada",color:"bg-red-100 text-red-800",icon:y,textColor:"text-red-600"},cancelled_provider:{label:"Cancelada por proveedor",color:"bg-red-100 text-red-800",icon:y,textColor:"text-red-600"},no_show:{label:"No se presentó",color:"bg-gray-100 text-gray-800",icon:y,textColor:"text-gray-600"},refunded:{label:"Reembolsada",color:"bg-purple-100 text-purple-800",icon:B,textColor:"text-purple-600"}};function pe(){const{user:t}=Z(),{showToast:u}=U(),[m,v]=i.useState(z),[n,d]=i.useState(z),[a,o]=i.useState(!1),[h,D]=i.useState(""),[j,S]=i.useState("all"),[f,P]=i.useState("all"),[g,O]=i.useState(!1),[T,q]=i.useState(null),[A,F]=i.useState(!1);i.useEffect(()=>{H()},[h,j,f,m]);const H=()=>{let s=m;if(h&&(s=s.filter(r=>r.bookingNumber.toLowerCase().includes(h.toLowerCase())||r.items.some(l=>l.name.toLowerCase().includes(h.toLowerCase())))),j!=="all"&&(s=s.filter(r=>r.status===j)),f!=="all"){const r=new Date;s=s.filter(l=>{const p=new Date(l.startDate);return f==="upcoming"?p>=r:p<r})}d(s)},L=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(s),I=s=>new Intl.DateTimeFormat("es-CO",{year:"numeric",month:"long",day:"numeric"}).format(new Date(s)),M=async s=>{if(window.confirm("¿Estás seguro de que deseas cancelar esta reserva?")){o(!0);try{await new Promise(r=>setTimeout(r,1e3)),v(r=>r.map(l=>l.id===s?{...l,status:"cancelled_user"}:l)),u("Reserva cancelada exitosamente","success")}catch{u("Error al cancelar la reserva","error")}finally{o(!1)}}},V=s=>{q(s),F(!0)},_=s=>{const r=new Date,p=(new Date(s.startDate).getTime()-r.getTime())/(1e3*60*60);return["pending","confirmed"].includes(s.status)&&p>24};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-accent-50 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"Mis Reservas"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Gestiona todas tus reservas en Villavieja"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-strong border border-white/20 p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:h,onChange:s=>D(s.target.value),placeholder:"Buscar por número de reserva o servicio...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>O(!g),className:x("px-4 py-3 rounded-xl border-2 font-medium transition-all duration-300 flex items-center space-x-2",g?"bg-primary-600 text-white border-primary-600":"bg-white border-gray-300 text-gray-700 hover:border-primary-300"),children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:"Filtros"}),e.jsx(Q,{className:x("w-4 h-4 transition-transform",g?"rotate-180":"")})]}),e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),g&&e.jsx(b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{value:j,onChange:s=>S(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"pending",children:"Pendiente"}),e.jsx("option",{value:"confirmed",children:"Confirmada"}),e.jsx("option",{value:"in_progress",children:"En progreso"}),e.jsx("option",{value:"completed",children:"Completada"}),e.jsx("option",{value:"cancelled_user",children:"Cancelada"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha"}),e.jsxs("select",{value:f,onChange:s=>P(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"Todas las fechas"}),e.jsx("option",{value:"upcoming",children:"Próximas"}),e.jsx("option",{value:"past",children:"Pasadas"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(c,{variant:"ghost",onClick:()=>{D(""),S("all"),P("all")},className:"w-full",children:"Limpiar filtros"})})]})})]}),e.jsx("div",{className:"space-y-6",children:n.map((s,r)=>{const l=N[s.status],p=l.icon;return e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.1},className:"bg-white/80 backdrop-blur-lg rounded-3xl shadow-strong border border-white/20 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 lg:mb-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center",children:e.jsx(w,{className:"w-8 h-8 text-white"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:s.items[0].name}),e.jsxs("p",{className:"text-gray-600",children:["#",s.bookingNumber]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(p,{className:x("w-4 h-4 mr-2",l.textColor)}),e.jsx("span",{className:x("px-3 py-1 rounded-full text-xs font-medium",l.color),children:l.label})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:L(s.pricing.total)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[I(s.startDate),s.endDate!==s.startDate&&` - ${I(s.endDate)}`]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[s.guests.length," huéspedes"]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Villavieja, Huila"})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"capitalize",children:s.payment.method})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>V(s),children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Ver detalles"]}),_(s)&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>M(s.id),className:"text-red-600 border-red-200 hover:bg-red-50",disabled:a,children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),s.status==="completed"&&!s.reviewed&&e.jsxs(c,{variant:"primary",size:"sm",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Calificar"]}),e.jsxs(c,{variant:"ghost",size:"sm",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Descargar"]})]})]})},s.id)})}),n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No se encontraron reservas"}),e.jsx("p",{className:"text-gray-600 mb-4",children:h||j!=="all"||f!=="all"?"Intenta ajustar los filtros de búsqueda":"Aún no tienes reservas. ¡Explora nuestros servicios!"}),e.jsx(c,{variant:"primary",children:"Explorar servicios"})]})]}),A&&T&&e.jsx(ee,{booking:T,onClose:()=>F(!1)})]})}function ee({booking:t,onClose:u}){const m=N[t.status],v=m.icon,n=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(a),d=a=>new Intl.DateTimeFormat("es-CO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a));return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Detalles de la Reserva"}),e.jsxs("p",{className:"text-gray-600",children:["#",t.bookingNumber]})]}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(y,{className:"w-6 h-6 text-gray-500"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Estado"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:x("w-5 h-5 mr-3",m.textColor)}),e.jsx("span",{className:x("px-4 py-2 rounded-full font-medium",m.color),children:m.label})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Fechas"}),e.jsxs("div",{className:"space-y-1 text-gray-600",children:[e.jsxs("p",{children:["Inicio: ",d(t.startDate)]}),e.jsxs("p",{children:["Fin: ",d(t.endDate)]}),e.jsxs("p",{children:["Reservado: ",d(t.createdAt)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Servicios"}),e.jsx("div",{className:"space-y-3",children:t.items.map((a,o)=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:[e.jsx(R,{className:"w-4 h-4 inline mr-1"}),a.guests," personas"]}),e.jsxs("span",{children:[e.jsx(w,{className:"w-4 h-4 inline mr-1"}),d(a.startDate)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold",children:n(a.price)}),e.jsxs("p",{className:"text-sm text-gray-600",children:["x",a.quantity]})]})]})},o))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Huéspedes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.guests.map((a,o)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:[a.firstName," ",a.lastName]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1 space-y-1",children:[e.jsxs("p",{children:["Documento: ",a.document]}),e.jsxs("p",{children:["Email: ",a.email]}),e.jsxs("p",{children:["Teléfono: ",a.phone]}),e.jsxs("p",{children:["Edad: ",a.age," años"]})]})]},o))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Información de Pago"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:n(t.pricing.subtotal)})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Impuestos:"}),e.jsx("span",{children:n(t.pricing.taxes)})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{children:"Tarifas:"}),e.jsx("span",{children:n(t.pricing.fees)})]}),t.pricing.discounts>0&&e.jsxs("div",{className:"flex justify-between py-2 text-green-600",children:[e.jsx("span",{children:"Descuentos:"}),e.jsxs("span",{children:["-",n(t.pricing.discounts)]})]}),e.jsxs("div",{className:"flex justify-between py-2 font-semibold border-t border-gray-200",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:n(t.pricing.total)})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Método:"})," ",e.jsx("span",{className:"capitalize",children:t.payment.method})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Estado:"})," ",e.jsx("span",{className:"capitalize",children:t.payment.status})]}),t.payment.transactionId&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ID Transacción:"})," ",t.payment.transactionId]}),t.payment.paymentDate&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Fecha de pago:"})," ",d(t.payment.paymentDate)]})]})})]})})]}),t.specialRequests&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Solicitudes Especiales"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-700",children:t.specialRequests})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Historial"}),e.jsx("div",{className:"space-y-2",children:t.statusHistory.map((a,o)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:x("w-3 h-3 rounded-full mr-3",N[a.status].textColor.replace("text-","bg-"))}),e.jsx("span",{className:"font-medium",children:N[a.status].label}),a.reason&&e.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["- ",a.reason]})]}),e.jsx("span",{className:"text-sm text-gray-600",children:d(a.date)})]},o))})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(c,{variant:"outline",onClick:u,children:"Cerrar"}),e.jsxs(c,{variant:"primary",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]})]})})]})})}export{pe as default};

import{u as j,r as i,j as e}from"./index-BxPqZtyK.js";import{a as c}from"./AuthRepository-CcL7-7Cb.js";import"./index-NIGUFBhG.js";function D(){var x,h,p,f,b;const{user:k,setAuth:P}=j(),[r,d]=i.useState(null),[v,u]=i.useState(!1),[m,g]=i.useState(!1),[t,n]=i.useState({name:"",phone:"",travelStyle:[],budget:"medium",language:"es"});i.useEffect(()=>{y()},[]);const y=async()=>{var s,a,o;try{const l=await c.getProfile();d(l),n({name:l.name||"",phone:l.phone||"",travelStyle:((s=l.preferences)==null?void 0:s.travelStyle)||[],budget:((a=l.preferences)==null?void 0:a.budget)||"medium",language:((o=l.preferences)==null?void 0:o.language)||"es"})}catch(l){console.error("Error loading profile:",l)}},N=async s=>{s.preventDefault(),g(!0);try{const a=await c.updateProfile({...t,preferences:{travelStyle:t.travelStyle,budget:t.budget,language:t.language}});d(a),u(!1),alert("Perfil actualizado exitosamente")}catch(a){alert(a.message||"Error al actualizar perfil")}finally{g(!1)}},w=s=>{n(a=>({...a,travelStyle:a.travelStyle.includes(s)?a.travelStyle.filter(o=>o!==s):[...a.travelStyle,s]}))},E=async s=>{try{const a=new FormData;a.append("photo",s);const o=await c.uploadProfilePhoto(a);d(o)}catch(a){alert(a.message||"Error al subir foto")}},S=async()=>{if(window.confirm("¿Estás seguro de que quieres eliminar tu cuenta? Esta acción no se puede deshacer."))try{await c.deleteAccount(),j.getState().logout(),alert("Cuenta eliminada exitosamente")}catch(s){alert(s.message||"Error al eliminar cuenta")}};return r?e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 px-6 py-8 text-white",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.profilePhoto||`https://ui-avatars.com/api/?name=${encodeURIComponent(r.name)}&size=128`,alt:"Profile",className:"w-24 h-24 rounded-full border-4 border-white/20"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-white text-green-600 rounded-full p-2 cursor-pointer hover:bg-gray-100",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:s=>{var a;return((a=s.target.files)==null?void 0:a[0])&&E(s.target.files[0])}})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:r.name}),e.jsx("p",{className:"text-white/80",children:r.email}),e.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-white/20 rounded-full text-sm",children:r.userType==="tourist"?"Turista":"Proveedor de servicios"})]})]})}),e.jsx("div",{className:"p-6",children:v?e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>n({...t,name:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>n({...t,phone:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Idioma"}),e.jsxs("select",{value:t.language,onChange:s=>n({...t,language:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"es",children:"Español"}),e.jsx("option",{value:"en",children:"English"})]})]}),r.userType==="tourist"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Presupuesto preferido"}),e.jsxs("select",{value:t.budget,onChange:s=>n({...t,budget:s.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"low",children:"Económico"}),e.jsx("option",{value:"medium",children:"Medio"}),e.jsx("option",{value:"high",children:"Alto"})]})]})]}),r.userType==="tourist"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estilos de viaje (selecciona los que te interesen)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["Aventura","Cultura","Naturaleza","Gastronomía","Historia","Relax","Deportes","Fotografía"].map(s=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.travelStyle.includes(s),onChange:()=>w(s),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsx("span",{className:"text-sm",children:s})]},s))})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:m?"Guardando...":"Guardar cambios"}),e.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Información personal"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",r.phone||"No especificado"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Idioma:"})," ",((x=r.preferences)==null?void 0:x.language)==="es"?"Español":"English"]})]})]}),r.userType==="tourist"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Preferencias de viaje"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Presupuesto:"}),((h=r.preferences)==null?void 0:h.budget)==="low"?"Económico":((p=r.preferences)==null?void 0:p.budget)==="medium"?"Medio":"Alto"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Estilos de viaje:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:((b=(f=r.preferences)==null?void 0:f.travelStyle)==null?void 0:b.map(s=>e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:s},s)))||e.jsx("span",{className:"text-gray-500",children:"No especificado"})})]})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>u(!0),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Editar perfil"}),e.jsx("button",{onClick:S,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar cuenta"})]})]})})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})})}export{D as default};

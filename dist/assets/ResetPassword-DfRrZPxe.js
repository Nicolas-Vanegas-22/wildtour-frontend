import{r as a,g as C,e as L,j as e,m as f,h as k,B as h,L as l,M as S}from"./index-BxPqZtyK.js";import{a as E}from"./authApi-BtGNXviM.js";import{u as A}from"./useToast-B6lGbM68.js";import{A as I}from"./arrow-left-BzBJmIVn.js";import{L as p}from"./lock-BHBK-ueC.js";import{E as b}from"./eye-off-XHfeSMzV.js";import{E as g}from"./eye-Du1rtJmm.js";import"./apiClient-BOD3YzUN.js";import"./index-NIGUFBhG.js";import"./apiTypes-CHx9-Zzm.js";function V(){const[s,c]=a.useState({password:"",confirmPassword:""}),[n,w]=a.useState(!1),[i,y]=a.useState(!1),[d,m]=a.useState(!1),[j,N]=a.useState(!1),[v]=C(),u=L(),{showToast:r}=A(),o=v.get("token")||"";a.useEffect(()=>{o||u("/login")},[o,u]);const P=async t=>{if(t.preventDefault(),s.password.length<8){r("La contraseña debe tener al menos 8 caracteres","error");return}if(s.password!==s.confirmPassword){r("Las contraseñas no coinciden","error");return}m(!0);try{await E.resetPassword({token:o,password:s.password}),N(!0),r("Contraseña restablecida exitosamente","success")}catch(x){r(x instanceof Error?x.message:"Error al restablecer contraseña","error")}finally{m(!1)}};return o?j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-accent-50 flex items-center justify-center p-4",children:e.jsxs(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"relative bg-white/80 backdrop-blur-lg rounded-3xl shadow-strong border border-white/20 p-8 w-full max-w-md text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(k,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-2xl font-display font-bold text-gray-900 mb-4",children:"¡Contraseña actualizada!"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Tu contraseña ha sido restablecida exitosamente. Ahora puedes iniciar sesión con tu nueva contraseña."}),e.jsx(h,{asChild:!0,className:"w-full",children:e.jsx(l,{to:"/login",children:"Iniciar sesión"})})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-accent-50 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary-100 rounded-full opacity-20 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-accent-100 rounded-full opacity-20 blur-3xl"})]}),e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative bg-white/80 backdrop-blur-lg rounded-3xl shadow-strong border border-white/20 p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(l,{to:"/login",className:"inline-flex items-center text-gray-600 hover:text-primary-600 transition-colors mb-6",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Volver al login"]}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(S,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-3xl font-display font-bold bg-gradient-to-r from-primary-600 to-accent-600 bg-clip-text text-transparent mb-2",children:"Nueva contraseña"}),e.jsx("p",{className:"text-gray-600",children:"Ingresa tu nueva contraseña para restablecer tu cuenta"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:n?"text":"password",value:s.password,onChange:t=>c({...s,password:t.target.value}),className:"w-full pl-11 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Mínimo 8 caracteres",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>w(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:n?e.jsx(b,{className:"w-5 h-5"}):e.jsx(g,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar nueva contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:i?"text":"password",value:s.confirmPassword,onChange:t=>c({...s,confirmPassword:t.target.value}),className:"w-full pl-11 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Confirma tu nueva contraseña",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>y(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:i?e.jsx(b,{className:"w-5 h-5"}):e.jsx(g,{className:"w-5 h-5"})})]}),s.password!==s.confirmPassword&&s.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Las contraseñas no coinciden"})]}),e.jsx(h,{type:"submit",disabled:d||s.password!==s.confirmPassword,className:"w-full",size:"lg",children:d?"Guardando...":"Guardar nueva contraseña"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["¿Recordaste tu contraseña?"," ",e.jsx(l,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-medium transition-colors",children:"Inicia sesión"})]})})]})]}):null}export{V as default};
